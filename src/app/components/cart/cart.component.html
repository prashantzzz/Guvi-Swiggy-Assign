<app-header></app-header>

<div class="bg-gray-100 min-h-screen mt-20">
    <div class="container mx-auto p-4 grid grid-cols-1 lg:grid-cols-[1fr,400px] gap-4">
        <!-- lft col -->
        <div class="space-y-4">
            <!-- address section -->
            <div class="bg-white rounded p-6">
                <div class="flex items-start gap-4 mb-6">
                    <div class="bg-[#1a1d24] p-3 rounded">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                        </svg>
                    </div>
                    <div>
                        <h2 class="text-lg font-semibold text-[#1a1d24]">Select delivery address</h2>
                        <p class="text-gray-500 text-sm">You have a saved address in this location</p>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                    <!-- address Card -->
                    <div class="border border-gray-200 rounded p-4">
                        <div class="flex items-center gap-2 mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path
                                    d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
                            </svg>
                            <span class="font-medium">Home</span>
                        </div>
                        <p class="text-gray-600 text-sm mb-4">Room 1, Street 1, Banglore 110040</p>
                        <div class="flex items-center gap-3">
                            <span class="text-gray-500 text-sm font-medium">57 MINS</span>
                            <button
                                class="bg-[#60b246] text-white px-4 py-2 text-sm font-medium rounded hover:bg-[#55a33e]">
                                DELIVER HERE
                            </button>
                        </div>
                    </div>

                    <!-- new Address card -->
                    <div class="border border-gray-200 rounded p-4">
                        <div class="flex items-center gap-2 mb-3">
                            <svg class="w-5 h-5 text-[#60b246]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 4v16m8-8H4" />
                            </svg>
                            <span class="font-medium">Add New Address</span>
                        </div>
                        <p class="text-gray-600 text-sm mb-4">Add new address to unlock benefits</p>
                        <button
                            class="border border-[#60b246] text-[#60b246] px-4 py-2 text-sm font-medium rounded hover:bg-green-50">
                            ADD NEW
                        </button>
                    </div>
                </div>
            </div>

            <!-- payment section -->
            <div class="bg-white rounded p-6">
                <div class="flex items-center gap-4">
                    <div class="bg-gray-100 p-3 rounded">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
                        </svg>
                    </div>
                    <h2 class="text-lg font-semibold text-[#1a1d24]">Payment</h2>
                </div>
                
                <div class="mt-4">
                    <div class="container mx-auto p-4 max-w-3xl">
                        <!-- header -->
                        <div class="flex items-center gap-3 mb-6">
                            <!-- <button class="text-gray-600">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                                </svg>
                            </button> -->
                            <div>
                                <h1 class="text-xl font-semibold text-gray-800">Payment Options</h1>
                                <p class="text-sm text-gray-600">
                                    <span>2 items</span>
                                    <span class="mx-1">â€¢</span>
                                    <span>Total: â‚¹414</span>
                                    <span class="text-green-500 ml-1">â€¢ Savings of â‚¹199</span>
                                </p>
                            </div>
                        </div>

                        <!-- Delivery Info -->
                        <div class="mb-6">
                            <div class="flex items-start gap-3">
                                <div class="flex flex-col items-center">
                                    <div class="w-3 h-3 rounded-full bg-purple-600"></div>
                                    <div class="w-0.5 h-8 bg-purple-600"></div>
                                    <div class="w-3 h-3 rounded-full bg-purple-600"></div>
                                </div>
                                <div class="space-y-4 flex-1">
                                    <div>
                                        <div class="flex items-center gap-2">
                                            <span class="font-medium">Fusion Lounge</span>
                                            <span class="text-gray-500">|</span>
                                            <span class="text-gray-500">Delivery in: 20 mins</span>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex items-center gap-2">
                                            <span class="font-medium">Home</span>
                                            <span class="text-gray-500">|</span>
                                            <span class="text-gray-500">Room 1, street 1, Banglore 110040, India</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Payment Methods -->
                        <div class="space-y-4">
                            <!-- Offers Banner -->
                            <div class="bg-green-50 p-4 rounded-lg flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white"
                                            viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z"
                                                clip-rule="evenodd" />
                                        </svg>
                                    </div>
                                    <span class="text-green-700 font-medium">Save upto â‚¹83 more with payment
                                        offers</span>
                                </div>
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-700"
                                    viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd"
                                        d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                                        clip-rule="evenodd" />
                                </svg>
                            </div>

                            <!-- UPI Section -->
                            <div class="rounded-lg shadow-sm">
                                <div class="p-4 flex items-center gap-4">
                                    <img src="assets/BHIM.svg" alt="UPI" class="h-3">
                                    <span class="font-medium text-gray-800">Pay by any UPI App</span>
                                </div>
                                <!-- Add New UPI -->
                                <div class="p-4 border-t">
                                    <button class="w-full flex items-center gap-3 text-left">
                                        <div
                                            class="w-6 h-6 rounded border-2 border-orange-500 flex items-center justify-center">
                                            <span class="text-orange-500 font-bold">+</span>
                                        </div>
                                        <div>
                                            <p class="text-orange-500 font-medium">Add New UPI ID</p>
                                            <p class="text-sm text-gray-500">You need to have a registered UPI ID</p>
                                        </div>
                                    </button>
                                </div>
                            </div>

                            <!-- Cards Section -->
                            <div class="bg-white rounded-lg shadow-sm">
                                <div class="p-4">
                                    <h3 class="font-medium text-gray-800">Credit & Debit Cards</h3>
                                </div>
                                <!-- Add New Card -->
                                <div class="p-4 border-t">
                                    <button class="w-full flex items-center gap-3 text-left">
                                        <div
                                            class="w-6 h-6 rounded border-2 border-orange-500 flex items-center justify-center">
                                            <span class="text-orange-500 font-bold">+</span>
                                        </div>
                                        <div>
                                            <p class="text-orange-500 font-medium">Add New Card</p>
                                            <p class="text-sm text-gray-500">Save and Pay via Cards.</p>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="bg-white rounded lg:sticky lg:top-4 h-fit">
            <!-- restaurant Info -->
            <div class="p-4 border-b">
                <div class="flex items-center gap-3">
                    <img src="assets/spicebazaar.jpg" alt="FreshMenu" class="w-12 h-12 rounded object-cover">
                    <div>
                        <h3 class="font-bold text-lg">Fusion Lounge</h3>
                        <p class="text-gray-600">Banglore</p>
                    </div>
                </div>
            </div>
        
            <!-- cart items -->
            <div class="p-4 space-y-4">
                <ng-container *ngIf="cartItems$ | async as cartItems">
                    <!-- empty cart msg -->
                    <div *ngIf="cartItems.length === 0" class="text-center text-gray-500 py-4">
                        Your cart is empty
                    </div>
        
                    <!-- cart items -->
                    <div *ngFor="let item of cartItems" class="flex items-start justify-between gap-4">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-2">
                                <img [src]="getIconSrc(item.isVeg)" 
                                     [alt]="item.isVeg ? 'Vegetarian' : 'Non-Vegetarian'" 
                                     class="w-4 h-4">
                                <h4 class="font-medium">{{ item.name }}</h4>
                            </div>
                            <div class="flex items-center gap-2">
                                <button class="border border-gray-300 px-3 py-1 text-gray-500"
                                        (click)="decreaseQuantity(item)">âˆ’</button>
                                <span class="w-8 text-center">{{ item.quantity }}</span>
                                <button class="border border-gray-300 px-3 py-1 text-gray-500"
                                        (click)="increaseQuantity(item)">+</button>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="font-medium">â‚¹{{ item.price * item.quantity }}</p>
                        </div>
                    </div>
        
                    <!-- suggestions -->
                    <div class="bg-gray-50 p-3 rounded text-sm text-gray-500 flex items-center">
                        <span class="mr-2">ðŸ’¬</span>
                        <input type="text" placeholder="Any suggestions? We will pass it on..."
                            class="bg-gray-50 text-gray-500 focus:outline-none w-full" />
                    </div>
        
                    <!-- no contact delivery -->
                    <div class="border rounded p-4">
                        <label class="flex items-start gap-3">
                            <input type="checkbox" class="mt-1">
                            <div>
                                <p class="font-medium mb-1">Opt in for No-contact Delivery</p>
                                <p class="text-gray-500 text-sm leading-snug">
                                    Unwell, or avoiding contact? Please select no-contact delivery. Partner will safely
                                    place the order outside your door (not for COD)
                                </p>
                            </div>
                        </label>
                    </div>
        
                    <!-- coupon button -->
                    <!-- <button class="w-full border border-gray-200 rounded p-4 text-left flex items-center gap-3">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
                        </svg>
                        <span class="font-medium">Apply Coupon</span>
                    </button> -->
        
                    <!-- bill -->
                    <div class="space-y-3" *ngIf="cartTotal$ | async as total">
                        <h4 class="font-medium">Bill Details</h4>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600">Item Total</span>
                            <span>â‚¹{{ total }}</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600">Delivery Fee | 13.5 kms</span>
                            <span>â‚¹153</span>
                        </div>
                        <div class="flex justify-between text-sm text-green-500">
                            <span>Extra discount for you</span>
                            <span>-â‚¹50</span>
                        </div>
                        <div class="flex justify-between pt-3 border-t font-medium">
                            <span>TO PAY</span>
                            <span>â‚¹{{ total + 153 - 50 }}</span>
                        </div>
                    </div>
                </ng-container>
            </div>
        </div>

    </div>
</div>

<!-- <app-footer></app-footer> -->